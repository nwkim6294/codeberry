<!-- /templates/recipes/list.html -->
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<meta charset="UTF-8">
	<title>비밀 레시피 목록</title>
	<!-- Tailwind, FontAwesome CDN, Font style -->
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
	<style>
		@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Noto+Sans+KR:wght@400;700&display=swap');

		body {
			font-family: 'Noto Sans KR', sans-serif;
		}

		.font-orbitron {
			font-family: 'Orbitron', sans-serif;
		}

		.glassmorphism {
			background: rgba(31, 41, 55, 0.6);
			backdrop-filter: blur(10px);
			-webkit-backdrop-filter: blur(10px);
			border: 1px solid rgba(255, 255, 255, 0.1);
		}
	</style>
</head>

<body class="bg-gray-800 text-white">
	<div th:replace="~{layout/header :: header}"></div>
	<main class="container mx-auto p-8">
		<div class="text-center mb-12">
			<h1 class="text-4xl font-bold font-orbitron text-teal-400">SECRET RECIPES</h1>
			<p class="text-gray-400 mt-2">차원을 넘나드는 맛의 비밀이 여기에 있습니다.</p>
		</div>
		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
			<!-- Recipe Card -->
			<div th:each="recipe : ${recipes}" class="glassmorphism rounded-xl shadow-lg overflow-hidden flex flex-col">
				<div class="p-6 flex-grow">
					<p class="text-sm text-gray-400">
					    연구원: 
					    <span class="font-semibold" 
					          th:text="${recipe.labUser != null ? recipe.labUser.username : '알 수 없음'}"></span>
					</p>
					<h2 class="text-2xl font-bold mt-2 text-teal-300" th:text="${recipe.name}">Recipe Name</h2>
					<p class="mt-4 text-gray-300" th:text="${recipe.description}">Recipe description...</p>
				</div>
				<!-- TODO: 현재 로그인한 사용자가 레시피의 작성자인 경우에만 수정/삭제 버튼이 보이도록 하세요. -->
				<div class="p-6 bg-gray-900/50 flex justify-end space-x-3"
				     th:if="${recipe.labUser != null and #authentication != null and #authentication.name == recipe.labUser.username}">
					<a th:href="@{/recipes/{id}/edit(id=${recipe.id})}"
						class="text-sm text-yellow-400 hover:text-yellow-300 font-semibold">수정</a>
					<form th:action="@{/recipes/{id}/delete(id=${recipe.id})}" method="post">
						<button type="submit"
							class="text-sm text-red-500 hover:text-red-400 font-semibold bg-transparent border-none cursor-pointer">삭제</button>
					</form>
				</div>
			</div>
			<!-- Empty State -->
			<div th:if="${#lists.isEmpty(recipes)}" class="col-span-full text-center py-20 text-gray-500">
				아직 등록된 레시피가 없습니다.
			</div>
		</div>
	</main>
</body>

</html>